name: Student progress overview (MCP)
description: Open the progress tab and confirm charts render for a student.
config:
  baseUrl: http://localhost:4200
  timeout: 20000
steps:
  - navigate:
      url: /login
  - fill:
      target:
        selector: 'input[formcontrolname="username"]'
      value: '{{ secrets.username }}'
  - fill:
      target:
        selector: 'input[formcontrolname="password"]'
      value: '{{ secrets.password }}'
  - click:
      target:
        role: button
        name: 'Sign in'
  - waitFor:
      target:
        role: heading
        name: 'Dashboard'
  - waitFor:
      target:
        selector: 'table.table tbody tr a.btn'
  - evaluate:
      script: |
        () => {
          const firstLink = document.querySelector('table.table tbody tr a.btn');
          if (!firstLink) {
            throw new Error('No student rows available to inspect');
          }
          firstLink.click();
          return true;
        }
  - waitFor:
      target:
        selector: '.sidebar a.active'
        text: 'Info'
  - click:
      target:
        text: 'Progress'
  - waitFor:
      target:
        role: heading
        name: 'Progress overview'
  - screenshot:
      name: 'student-progress-overview'
